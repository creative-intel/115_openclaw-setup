<!-- âš ï¸ SYNC REMINDER: When editing this file, update the Notion page too â†’ https://www.notion.so/creative-intelligence-ai/Marcus-Architecture-Maps-307d48b650c081828bb4f36fbfd38908 -->

# OpenClaw Features â€” Hook Commands, Heartbeat, Cron Job

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                          OPENCLAW â€” WORKSPACE ARCHITECTURE                              â•‘
â•‘                          â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                â•‘
â•‘                                                                                         â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘
â•‘   â”‚                         ğŸ§   OPENCLAW GATEWAY (Runtime)                          â”‚   â•‘
â•‘   â”‚                                                                                 â”‚   â•‘
â•‘   â”‚   ~/.openclaw/openclaw.json â”€â”€â”€ API keys, model configs, agent settings         â”‚   â•‘
â•‘   â”‚                                                                                 â”‚   â•‘
â•‘   â”‚   Models:  claude-sonnet-4-6 (main â€” judgment, writing, comms)                  â”‚   â•‘
â•‘   â”‚            anthropic/claude-haiku-4-5 (heartbeat + isolated cron â€” 4x cheaper)  â”‚
  â”‚            moonshot/kimi-k2.5 (lite agent â€” bulk execution, file ops)           â”‚
  â”‚            gpt-4o-mini (voice calls only, no tools)                             â”‚   â•‘
â•‘   â”‚            embeddinggemma-300M (QMD vector search, local)                       â”‚   â•‘
â•‘   â”‚            qwen3-reranker-0.6b (QMD reranking, local)                           â”‚   â•‘
â•‘   â”‚            qmd-query-expansion-1.7B (QMD hybrid search, local)                  â”‚   â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘
â•‘            â”‚                          â”‚                          â”‚                       â•‘
â•‘   â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â•‘
â•‘   FEATURE 1â”‚           FEATURE 2      â”‚           FEATURE 3      â”‚                       â•‘
â•‘   â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â•‘
â•‘            â–¼                          â–¼                          â–¼                       â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â•‘
â•‘   â”‚  /HOOK COMMAND  â”‚     â”‚  HEARTBEAT CHECK     â”‚    â”‚  CRON JOB (Weekly)   â”‚            â•‘
â•‘   â”‚  (User-invoked) â”‚     â”‚  (Every 15 min)      â”‚    â”‚  (Scheduled audit)   â”‚            â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â•‘
â•‘           â”‚                         â”‚                          â”‚                         â•‘
â•‘           â–¼                         â–¼                          â–¼                         â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â•‘
â•‘   â”‚ TRIGGER:        â”‚     â”‚ TRIGGER:             â”‚    â”‚ TRIGGER:             â”‚            â•‘
â•‘   â”‚ User types      â”‚     â”‚ Gateway timer fires  â”‚    â”‚ System crontab runs  â”‚            â•‘
â•‘   â”‚ /status, /tell, â”‚     â”‚ every 30 min, reads  â”‚    â”‚ weekly-audit.sh      â”‚            â•‘
â•‘   â”‚ /health, /audit â”‚     â”‚ heartbeat-state.json â”‚    â”‚ on schedule          â”‚            â•‘
â•‘   â”‚ /deep, /catchup â”‚     â”‚ to pick next check   â”‚    â”‚                      â”‚            â•‘
â•‘   â”‚ etc.            â”‚     â”‚                      â”‚    â”‚                      â”‚            â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â•‘
â•‘           â”‚                         â”‚                          â”‚                         â•‘
â•‘ â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â•‘
â•‘  FILES    â”‚ READ                    â”‚ READ                     â”‚ READ                    â•‘
â•‘ â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â•‘
â•‘           â”‚                         â”‚                          â”‚                         â•‘
â•‘           â–¼                         â–¼                          â–¼                         â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â•‘
â•‘  â”‚ skills/          â”‚   â”‚ HEARTBEAT.md          â”‚   â”‚ 80_reference/golden/     â”‚          â•‘
â•‘  â”‚  â”œ status-check  â”‚   â”‚  (rotation protocol)  â”‚   â”‚  â”œ AGENTS.md             â”‚          â•‘
â•‘  â”‚  â”œ tell.md       â”‚   â”‚                       â”‚   â”‚  â”œ HEARTBEAT.md          â”‚          â•‘
â•‘  â”‚  â”œ focus-cust.md â”‚   â”‚ 90_state/             â”‚   â”‚  â”œ SECURITY.md           â”‚          â•‘
â•‘  â”‚  â”œ deep-dive.md  â”‚   â”‚  â”” heartbeat-state    â”‚   â”‚  â”œ TOOLS.md              â”‚          â•‘
â•‘  â”‚  â”œ catchup.md    â”‚   â”‚    .json               â”‚   â”‚  â”” CONFIG.md             â”‚          â•‘
â•‘  â”‚  â”œ audit-now.md  â”‚   â”‚    {last_check_index,  â”‚   â”‚                          â”‚          â•‘
â•‘  â”‚  â”” lessons.md    â”‚   â”‚     last_run,          â”‚   â”‚ LIVE ROOT FILES:         â”‚          â•‘
â•‘  â”‚                   â”‚   â”‚     total_checks: 7}   â”‚   â”‚  â”œ AGENTS.md             â”‚          â•‘
â•‘  â”‚ CONFIG.md         â”‚   â”‚                        â”‚   â”‚  â”œ HEARTBEAT.md          â”‚          â•‘
â•‘  â”‚ CUSTOMERS.md      â”‚   â”‚ Per-rotation reads:    â”‚   â”‚  â”œ SECURITY.md           â”‚          â•‘
â•‘  â”‚ TODO.md           â”‚   â”‚  1. Email inbox         â”‚   â”‚  â”œ TOOLS.md              â”‚          â•‘
â•‘  â”‚ WORKLOG.md        â”‚   â”‚  2. Task manager        â”‚   â”‚  â”” CONFIG.md             â”‚          â•‘
â•‘  â”‚ 10_memory/        â”‚   â”‚  3. Meeting transcripts â”‚   â”‚                          â”‚          â•‘
â•‘  â”‚  â”” episodic/      â”‚   â”‚  4. Calendar scan       â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â•‘
â•‘  â”‚ 30_agents/shared/ â”‚   â”‚  5. QMD index age       â”‚                                        â•‘
â•‘  â”‚  â”” tasks.md       â”‚   â”‚  6. Operating docs      â”‚                                        â•‘
â•‘  â”‚ 40_customers/     â”‚   â”‚  7. System updates       â”‚                                        â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â•‘
â•‘           â”‚                         â”‚                          â”‚                            â•‘
â•‘ â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â•‘
â•‘  ACTIONS  â”‚                         â”‚                          â”‚                            â•‘
â•‘ â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â•‘
â•‘           â–¼                         â–¼                          â–¼                            â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â•‘
â•‘  â”‚ /status:         â”‚   â”‚ ESCALATION RULES:     â”‚   â”‚ DIFF golden/ vs live:    â”‚             â•‘
â•‘  â”‚  â€¢ qmd --version â”‚   â”‚                       â”‚   â”‚                          â”‚             â•‘
â•‘  â”‚  â€¢ email unread  â”‚   â”‚ ğŸ”´ URGENT:            â”‚   â”‚  golden/AGENTS.md        â”‚             â•‘
â•‘  â”‚  â€¢ read tasks.md â”‚   â”‚  â†’ iMessage alert     â”‚   â”‚    vs AGENTS.md          â”‚             â•‘
â•‘  â”‚  â€¢ read state    â”‚   â”‚    to your human      â”‚   â”‚                          â”‚             â•‘
â•‘  â”‚                  â”‚   â”‚                       â”‚   â”‚  golden/HEARTBEAT.md     â”‚             â•‘
â•‘  â”‚ /tell person msg:â”‚   â”‚ ğŸŸ¡ ACTIONABLE:        â”‚   â”‚    vs HEARTBEAT.md       â”‚             â•‘
â•‘  â”‚  â€¢ lookup CONFIG â”‚   â”‚  â†’ Add to TODO.md     â”‚   â”‚                          â”‚             â•‘
â•‘  â”‚  â€¢ route channel â”‚   â”‚  â†’ Create task in     â”‚   â”‚  ...etc for each file    â”‚             â•‘
â•‘  â”‚  â€¢ plain text!   â”‚   â”‚    tasks.md            â”‚   â”‚                          â”‚             â•‘
â•‘  â”‚                  â”‚   â”‚                       â”‚   â”‚ OUTPUT:                  â”‚             â•‘
â•‘  â”‚ /focus customer: â”‚   â”‚ ğŸŸ¢ INFORMATIONAL:     â”‚   â”‚  â†’ logs/audits/          â”‚             â•‘
â•‘  â”‚  â€¢ load customer â”‚   â”‚  â†’ Log to today's     â”‚   â”‚    YYYY-MM-DD-audit.md   â”‚             â•‘
â•‘  â”‚    repo          â”‚   â”‚    episodic memory     â”‚   â”‚                          â”‚             â•‘
â•‘  â”‚  â€¢ qmd search    â”‚   â”‚                       â”‚   â”‚ IF DRIFT DETECTED:       â”‚             â•‘
â•‘  â”‚  â€¢ load transcrp â”‚   â”‚ ğŸŒ™ QUIET HOURS:       â”‚   â”‚  â†’ Alert your human      â”‚             â•‘
â•‘  â”‚                  â”‚   â”‚  11pm-7am = no alerts  â”‚   â”‚  â†’ Log to WORKLOG.md     â”‚             â•‘
â•‘  â”‚ /audit:          â”‚   â”‚  (unless critical)     â”‚   â”‚  â†’ Update TODO.md        â”‚             â•‘
â•‘  â”‚  â€¢ run audit.sh  â”‚   â”‚                       â”‚   â”‚                          â”‚             â•‘
â•‘  â”‚  â€¢ show drift    â”‚   â”‚ UPDATE STATE:          â”‚   â”‚ SCHEDULE:                â”‚             â•‘
â•‘  â”‚                  â”‚   â”‚  â†’ heartbeat-state     â”‚   â”‚  Weekly (catches drift   â”‚             â•‘
â•‘  â”‚ /deep topic:     â”‚   â”‚    .json ++index       â”‚   â”‚  faster than monthly)    â”‚             â•‘
â•‘  â”‚  â€¢ full context  â”‚   â”‚  â†’ episodic log        â”‚   â”‚                          â”‚             â•‘
â•‘  â”‚  â€¢ burn tokens   â”‚   â”‚    append              â”‚   â”‚                          â”‚             â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â•‘
â•‘                                                                                             â•‘
â•‘ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•     â•‘
â•‘  EXTERNAL TOOLS & APIS (varies per setup)                                                   â•‘
â•‘ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•     â•‘
â•‘                                                                                             â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â•‘
â•‘  â”‚ Email    â”‚ â”‚ Calendar â”‚ â”‚ Task Mgr â”‚ â”‚ Meeting  â”‚ â”‚  QMD     â”‚ â”‚ Voice/TTS    â”‚        â•‘
â•‘  â”‚ CLI      â”‚ â”‚ CLI      â”‚ â”‚ (Notion, â”‚ â”‚ Transcr. â”‚ â”‚ (local)  â”‚ â”‚ (optional)   â”‚        â•‘
â•‘  â”‚          â”‚ â”‚          â”‚ â”‚ etc.)    â”‚ â”‚ (Granola â”‚ â”‚ search   â”‚ â”‚              â”‚        â•‘
â•‘  â”‚          â”‚ â”‚          â”‚ â”‚          â”‚ â”‚  etc.)   â”‚ â”‚          â”‚ â”‚              â”‚        â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â•‘
â•‘                                                                                             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

## Summary

- **/hook Commands** â€” User types slash commands, Gateway matches to skill files, reads workspace files, executes actions
- **Heartbeat** â€” 15-min timer rotates through 7 checks, escalates by severity, updates state
- **Cron Job** â€” Weekly audit diffs live files vs golden copies, reports drift

## Feature Details

| Feature | How It Works | Key Files |
|---------|-------------|-----------|
| Hook commands | User types `/command`, Gateway reads matching skill file, executes procedure | `skills/*.md` |
| Heartbeat | Timer fires every 30 min, reads `heartbeat-state.json`, runs next check in rotation | `HEARTBEAT.md`, `90_state/heartbeat-state.json` |
| Weekly audit | Cron job runs `weekly-audit.sh`, diffs golden/ vs live root files, reports drift | `80_reference/golden/`, `50_tools/scripts/weekly-audit.sh` |
